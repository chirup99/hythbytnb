 Here is a detailed breakdown of the steps and terminal commands I used to build that "perfect" ZIP file.

Prerequisites
Before zipping, we ensure the application is ready for production by building the frontend and bundling the server.

# 1. Build the project
# This command runs Vite to build the frontend and esbuild to bundle the server into dist/index.js
npm run build
Step-by-Step ZIP Creation
To build the ZIP file with the exact structure required by AWS Elastic Beanstalk, follow these commands in your terminal:

# 2. Create a temporary staging directory
mkdir -p eb_deploy/.ebextensions
# 3. Create the AWS Port Configuration
# This tells AWS to route traffic to port 8081
cat > eb_deploy/.ebextensions/port.config <<EOF
option_settings:
  aws:elasticbeanstalk:application:environment:
    PORT: 8081
EOF
# 4. Create the Procfile
# This tells AWS exactly how to start your application/port.config ,
echo "web: npm start" > eb_deploy/Procfile
# 5. Create the production .env file
# Replace the values below with your actual credentials
cat > eb_deploy/.env <<EOF
PORT=8081
NODE_ENV=production
# ... (include your other API keys here)
EOF
# 6. Copy all required files into the staging area
# We include dist (artifacts), server & shared (source), and package files
cp -r dist eb_deploy/
cp -r server eb_deploy/
cp -r shared eb_deploy/
cp package.json eb_deploy/
cp package-lock.json eb_deploy/
# 7. Generate the ZIP file
# We move into the folder to ensure the ZIP structure doesn't have a top-level folder
cd eb_deploy && zip -r ../aws_eb_deployment_final.zip . && cd ..
# 8. Clean up
rm -rf eb_deploy
Why this structure works:
dist/: Contains your compiled frontend and the bundled index.js server.
server/ & shared/: While technically the server is bundled, including the source files ensures that any dynamic imports or secondary processes (like background tasks) have access to the original code.
Procfile: Explicitly tells AWS to run npm start, which we configured in package.json to be node dist/index.js.
.ebextensions/port.config: Crucial for AWS to know that your app is listening on 8081 instead of the default 8080.
.env: Provides the necessary secrets and environment settings directly to the instance.


To build the ZIP file with a custom name, you can simply change the filename in the final zip command.

Here is the updated command sequence where you can easily swap MY_APP_BUILD_V10.zip for any name you prefer:

# 1. Build the project
npm run build
# 2. Prepare staging area
mkdir -p eb_deploy/.ebextensions
# 3. Create config files
cat > eb_deploy/.ebextensions/port.config <<EOF
option_settings:
  aws:elasticbeanstalk:application:environment:
    PORT: 8081
EOF
echo "web: npm start" > eb_deploy/Procfile
# 4. Copy folders and files
cp -r dist eb_deploy/
cp -r server eb_deploy/
cp -r shared eb_deploy/
cp package.json eb_deploy/
cp package-lock.json eb_deploy/
# 5. ZIP with your custom name
# Change 'MY_APP_BUILD_V10.zip' to whatever you like
cd eb_deploy && zip -r ../MY_APP_BUILD_V10.zip . && cd ..
# 6. Cleanup
rm -rf eb_deploy
Pro Tip:
If you want to automate this, you can save these commands into a small script file (e.g., build-zip.sh) so you only have to run one command next time!